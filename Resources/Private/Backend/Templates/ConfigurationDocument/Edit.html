<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
      data-namespace-typo3-fluid="true">

    <f:layout name="Default" />

    <f:section name="Buttons"></f:section>

    <f:section name="Content">
        <f:render partial="ConfigurationDocument/ConfigurationEditorAssets" />

        <f:form action="save">
            <div>
                <p>
                    <f:link.action action="list"
                                   class="btn btn-default btn-sm t3-form-element-close-form-button"
                                   title="Close"
                                   additionalAttributes="{'data-role':'close'}">
                        <core:icon identifier="actions-close"
                                   size="small" />
                        Close
                    </f:link.action>

                    <f:if condition="!{document.readonly}">
                        <button class="btn btn-default btn-sm t3-form-element-save-form-button"
                                value="save"
                                title="Save"
                                type="submit">
                            <core:icon identifier="actions-document-save"
                                       size="small" />
                            Save
                        </button>
                    </f:if>
                </p>
            </div>

            <h1>{document.name}</h1>

            <div>
                <f:form.hidden name="documentIdentifier"
                               value="{document.id}" />
                <f:form.textarea name="document"
                                 value="{document.content}"
                                 class="dmf-configuration-document"
                                 style="width:60%;min-height:400px;"
                                 disabled="{f:if(condition:document.readonly, then:'disabled', else:'')}"
                                 data="{app:'true',mode:'embedded',global-document:'true',readonly:'{f:if(condition:document.readonly,then:\'true\',else:\'false\')}','url-schema':'{f:be.uri(route:\'ajax_digitalmarketingframework_configuration_schema\')}','url-defaults':'{f:be.uri(route:\'ajax_digitalmarketingframework_configuration_defaults\')}','url-merge':'{f:be.uri(route:\'ajax_digitalmarketingframework_configuration_merge\')}','url-split':'{f:be.uri(route:\'ajax_digitalmarketingframework_configuration_split\')}','url-update-includes':'{f:be.uri(route:\'ajax_digitalmarketingframework_configuration_update_includes\')}'}" />
            </div>
        </f:form>
    </f:section>

</html>